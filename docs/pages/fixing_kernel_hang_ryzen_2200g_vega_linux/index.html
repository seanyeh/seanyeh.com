<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="description" content="Sean Yeh, Pianist">

    <link href='https://fonts.googleapis.com/css?family=Great+Vibes' rel='stylesheet' type='text/css'>

    <link href="/stylesheets/normalize.css" rel="stylesheet" />

    <link href="/stylesheets/style.css" rel="stylesheet" />
    <link href="/stylesheets/monokai.css" rel="stylesheet" />

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Fixing kernel hangs on Ryzen 2200g + Vega 8 graphics on Linux</title>

    <!-- Open graph protocol -->
    <meta property="og:description" content="Sean Yeh"/>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-54765658-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-54765658-3');
    </script>

  </head>


  <body class="pages pages_fixing_kernel_hang_ryzen_2200g_vega_linux pages_fixing_kernel_hang_ryzen_2200g_vega_linux_index">
      
    <div class="center-box div-title">

            <div class="title-menu float-right">

                    <a class="menu-item float-right pages" href="/pages/">
                        <div>
                            <div class="icon"></div>
                            blog
                        </div>
                    </a>
                    <a class="menu-item float-right teaching" href="/teaching/">
                        <div>
                            <div class="icon"></div>
                            teach
                        </div>
                    </a>
                    <a class="menu-item float-right code" href="/code/">
                        <div>
                            <div class="icon"></div>
                            code
                        </div>
                    </a>
                    <a class="menu-item float-right music" href="/music/">
                        <div>
                            <div class="icon"></div>
                            music
                        </div>
                    </a>

            </div>

          <div class="title">
              <a href="/">
                  Sean Yeh
              </a>
          </div>


    </div>

    <div class="pages pages_fixing_kernel_hang_ryzen_2200g_vega_linux pages_fixing_kernel_hang_ryzen_2200g_vega_linux_index content">
        <div class="center-box">
    <p>
    <a href="/pages">← back to blog</a>
    </p>

    <h2>
        Fixing kernel hangs on Ryzen 2200g + Vega 8 graphics on Linux
    </h2>

    <div class="published">
        Published: 2019-07-20
    </div>

    <div class="tags">
        tags:

        <a href="/pages/tags/gaming/">gaming</a>,<a href="/pages/tags/linux/">linux</a>,<a href="/pages/tags/tech/">tech</a>
    </div>

    <div class="break"></div>


    <div>
        <h3 id="problem">Problem</h3>

<p>I recently built a cheap gaming pc with the Ryzen 2200g processor with Vega 8
graphics. It worked well for many things, but for certain games (or totally
randomly), the kernel would hang, requiring a
<a href="https://en.wikipedia.org/wiki/Magic_SysRq_key">REISUB</a> restart.</p>

<p>The kernel log (<code>/var/log/kern.log</code>) would usually show erorrs such as:
<code>[drm:amdgpu_job_timedout [amdgpu]] *ERROR* ring gfx timeout</code></p>

<p>A quick online search showed that this was a known problem, and I tried many of
the suggested solutions – various kernel boot options, newer kernel versions
(including compiling my own linux 5.2 kernel), and newer graphics drivers –
with no success.</p>

<h3 id="solution">Solution</h3>

<p>(For the record, I'm running Ubuntu 18.04, kernel version 4.18.0.24-generic. YMMV for
other distros.)</p>

<p>The solution that worked for me was super simple. Installing the
<a href="https://www.amd.com/en/support/kb/release-notes/rn-rad-lin-19-10-unified">Radeon drivers</a>
directly from amd's website did the trick. Surprisingly, this didn't
come up in my searches.</p>

<p>For Ubuntu, download the "Radeon™ Software for Linux® version 19.10 for Ubuntu
18.04.2", extract the archive, and then run <code>./amdgpu-pro-install -y</code>. That's
it!</p>

    </div>



        <div class="center-box">
            <div class="footer">
                Contact: <span class="obfuscate">sean<span>NOSPAM</span>@<span>NOSPAM</span>seanyeh.com</span>
            </div>
        </div>
    </div>


  </body>
</html>
